{% load static %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" 
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
        <title> HardwareIT — Cart </title>     
        
        <!-- CSS Link -->
        <link rel="stylesheet" href="{% static 'css/header.css' %}">
        <link rel="stylesheet" href="{% static 'css/cart.css' %}">

        <!-- Responsive CSS -->
        <style>
        @media (max-width: 768px) {
          nav .container {
            flex-direction: column;
            align-items: flex-start;
          }

          nav ul {
            flex-wrap: wrap;
            justify-content: center;
          }

          form {
            width: 100%;
            justify-content: center;
          }

          .btn-sign,
          .btn-log {
            width: 100%;
            margin-top: 10px;
          }
        }
        </style>

    </head>
    <body>

        <!-- Header -->
        {% include 'includes/header.html' %}
        
        <!-- Main -->
        <main class="cart-container">
            <h2>Your Shopping Cart</h2>

            {% if cart_items %}
            <div class="cart-box">
                <table class="cart-table">
                    <thead>
                        <tr>
                            <th>Product</th>
                            <th>Price</th>
                            <th>Quantity</th>
                            <th>Subtotal</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                    {% for item in cart_items %}
                        <tr>
                            <td class="product-name">{{ item.product.name }}</td>
                            <td>₹ {{ item.product.price }}</td>
                            <td class="qty">
                                <a href="{% url 'remove_from_cart' item.id %}" class="qty-btn">−</a>
                                <span>{{ item.quantity }}</span>
                                <a href="{% url 'add_to_cart' item.product.id %}" class="qty-btn">+</a>
                            </td>
                            <td>₹ {{ item.subtotal }}</td>
                            <td>
                                <a href="{% url 'delete_from_cart' item.id %}" class="remove-btn">
                                    Remove
                                </a>
                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>

                <div class="cart-summary">
                    <h3>Total Amount</h3>
                    <p class="total-price">₹ {{ total_price }}</p>
                    <a href="{% url 'checkout_page' %}" class="checkout-btn">
                        Proceed to Checkout
                    </a>
                </div>
            </div>
            {% else %}
                <p class="empty-cart">Your cart is empty.</p>
            {% endif %}
        </main>

        <!-- Footer -->
        {% include 'includes/footer.html' %}

    </body>
</html>